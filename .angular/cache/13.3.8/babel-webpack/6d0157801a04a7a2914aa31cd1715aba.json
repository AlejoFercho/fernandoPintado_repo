{"ast":null,"code":"import _asyncToGenerator from \"/Users/alejo/Downloads/carlosVasquez_listadoPokemon-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __asyncValues } from \"tslib\";\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/api-pokemon.service\";\nimport * as i2 from \"./components/search/search.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"./components/card-simple-pokemon/card-simple-pokemon.component\";\nimport * as i5 from \"./components/card-detail-pokemon/card-detail-pokemon.component\";\nimport * as i6 from \"./components/pagination/pagination.component\";\n\nfunction AppComponent_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_6_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.selectPokemon(item_r7);\n    });\n    i0.ɵɵelement(1, \"card-simple-pokemon\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pokemon\", item_r7);\n  }\n}\n\nfunction AppComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtemplate(1, AppComponent_div_6_div_1_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.pokemons);\n  }\n}\n\nfunction AppComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\");\n    i0.ɵɵtext(1, \"No se encuentran resultados\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_card_detail_pokemon_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"card-detail-pokemon\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"pokemon\", ctx_r3.selectedPokemon);\n  }\n}\n\nfunction AppComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\");\n    i0.ɵɵtext(1, \"No se ha seleccionado ning\\u00FAn pokemon\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(apiPokemonServices) {\n      this.apiPokemonServices = apiPokemonServices;\n      this.title = 'Listado de Pokemon';\n      this.limit = environment.ITEMS_BY_PAGE;\n      this.offset = 0;\n      this.pokemons = [];\n      this.selectedPokemon = null;\n      this.disabledNext = true;\n      this.disabledBack = true;\n    }\n\n    ngOnInit() {\n      this.searchPokemons();\n    }\n\n    searchPokemons() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        var e_1, _a;\n\n        _this.pokemons = [];\n        _this.selectedPokemon = null;\n\n        try {\n          const getPokemons = yield _this.apiPokemonServices.getPokemons(_this.limit.toString(), _this.offset.toString()).toPromise();\n          const listPokemons = [];\n          if (getPokemons.next) _this.disabledNext = false;else _this.disabledNext = true;\n          if (getPokemons.previous) _this.disabledBack = false;else _this.disabledBack = true;\n\n          try {\n            for (var _b = __asyncValues(getPokemons.results), _c; _c = yield _b.next(), !_c.done;) {\n              const pokemon = _c.value;\n              const urlPokemon = pokemon.url;\n\n              try {\n                const detailPokemon = yield _this.apiPokemonServices.getInfoPokemon(urlPokemon).toPromise();\n                const speciesPokemon = yield _this.apiPokemonServices.getInfoPokemon(detailPokemon.species.url).toPromise();\n                const addDetailPokemon = Object.assign(Object.assign({}, pokemon), {\n                  detailPokemon,\n                  speciesPokemon\n                });\n                listPokemons.push(addDetailPokemon);\n              } catch (error) {\n                console.log(error);\n              }\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n\n          _this.pokemons = listPokemons;\n        } catch (error) {\n          console.log(error);\n        }\n      })();\n    }\n\n    searchPokemon(value) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        _this2.pokemons = [];\n        _this2.selectedPokemon = null;\n        _this2.disabledNext = true;\n        _this2.disabledBack = true;\n\n        if (value.length > 3) {\n          try {\n            const listPokemons = [];\n            const detailPokemon = yield _this2.apiPokemonServices.getPokemon(value.toLowerCase()).toPromise();\n            const speciesPokemon = yield _this2.apiPokemonServices.getInfoPokemon(detailPokemon.species.url).toPromise();\n            const addDetailPokemon = {\n              name: detailPokemon.name,\n              detailPokemon,\n              speciesPokemon\n            };\n            listPokemons.push(addDetailPokemon);\n            _this2.pokemons = listPokemons;\n          } catch (error) {\n            console.log(error);\n          }\n        }\n\n        if (value.length === 0) _this2.searchPokemons();\n      })();\n    }\n\n    paginationBack() {\n      if (this.offset > 0) {\n        this.offset -= this.limit;\n        this.searchPokemons();\n      }\n    }\n\n    paginationNext() {\n      if (this.offset !== 0 || this.offset === 0) {\n        this.offset += this.limit;\n        this.searchPokemons();\n      }\n    }\n\n    selectPokemon(pokemon) {\n      this.selectedPokemon = pokemon;\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.ApiPokemonService));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 15,\n    vars: 7,\n    consts: [[1, \"header\"], [1, \"main\"], [1, \"list-pokemons\"], [3, \"searchChange\"], [\"class\", \"result\", 4, \"ngIf\", \"ngIfElse\"], [\"notItems\", \"\"], [1, \"pokemon-detail\"], [3, \"pokemon\", 4, \"ngIf\", \"ngIfElse\"], [\"notItemSelected\", \"\"], [1, \"footer\"], [3, \"disabledNext\", \"disabledBack\", \"onBack\", \"onNext\"], [1, \"result\"], [\"class\", \"card-result\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-result\", 3, \"click\"], [3, \"pokemon\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"search-input\", 3);\n        i0.ɵɵlistener(\"searchChange\", function AppComponent_Template_search_input_searchChange_5_listener($event) {\n          return ctx.searchPokemon($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, AppComponent_div_6_Template, 2, 1, \"div\", 4);\n        i0.ɵɵtemplate(7, AppComponent_ng_template_7_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵtemplate(10, AppComponent_card_detail_pokemon_10_Template, 1, 1, \"card-detail-pokemon\", 7);\n        i0.ɵɵtemplate(11, AppComponent_ng_template_11_Template, 2, 0, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 9)(14, \"custom-pagination\", 10);\n        i0.ɵɵlistener(\"onBack\", function AppComponent_Template_custom_pagination_onBack_14_listener() {\n          return ctx.paginationBack();\n        })(\"onNext\", function AppComponent_Template_custom_pagination_onNext_14_listener() {\n          return ctx.paginationNext();\n        });\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(8);\n\n        const _r4 = i0.ɵɵreference(12);\n\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.title);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.pokemons.length > 0)(\"ngIfElse\", _r1);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedPokemon)(\"ngIfElse\", _r4);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"disabledNext\", ctx.disabledNext)(\"disabledBack\", ctx.disabledBack);\n      }\n    },\n    directives: [i2.SearchComponent, i3.NgIf, i3.NgForOf, i4.CardSimplePokemonComponent, i5.CardDetailPokemonComponent, i6.PaginationComponent],\n    styles: [\".header[_ngcontent-%COMP%]{text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0}.main[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]{width:100%;padding-right:12px;display:flex;flex-direction:column}.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{margin-top:11px;display:flex;flex-direction:row;gap:2%;align-items:center;flex-wrap:wrap;width:100%}.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .card-result[_ngcontent-%COMP%]{width:100%;transform:scale(1);transition:.3s;margin-bottom:10px}.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .card-result[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.05);transition:.3s}.main[_ngcontent-%COMP%]   .pokemon-detail[_ngcontent-%COMP%], .footer[_ngcontent-%COMP%]{width:100%}@media (min-width: 400px){.main[_ngcontent-%COMP%]{justify-content:space-between}.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]{width:59%}.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .card-result[_ngcontent-%COMP%]{width:49%}.main[_ngcontent-%COMP%]   .pokemon-detail[_ngcontent-%COMP%]{width:39%}}@media (min-width: 800px){.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .card-result[_ngcontent-%COMP%]{width:32%}}@media (min-width: 1290px){.main[_ngcontent-%COMP%]   .list-pokemons[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .card-result[_ngcontent-%COMP%]{width:23.5%}}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}